{"version":3,"sources":["components/LoadingSpinner/LoadingSpinner.jsx","components/ErrorRetry/ErrorRetry.jsx","components/ErrorPrinter/ErrorPrinter.jsx","components/Card/CardLabel/CardLabel.jsx","components/Card/fight.svg","components/Card/basic-shield.svg","components/Card/Card.jsx","components/CardPage/CardPage.jsx","components/CardMultiDisplay/QueryBuilder/SearchBar/SearchBar.jsx","components/CardMultiDisplay/QueryBuilder/QueryBuilder.jsx","api/ElderScrollsLegendsAPI.js","components/CardMultiDisplay/LoadOnScroll/LoadOnScroll.jsx","components/CardMultiDisplay/CardMultiDisplay.jsx","App.jsx","serviceWorker.js","index.js"],"names":["React","memo","props","className","onRetryClick","onClick","children","superscript","text","cn","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","d","_ref3","_ref4","_ref5","_ref6","_ref","svgRef","title","id","enableBackground","height","viewBox","width","ref","ForwardRef","forwardRef","type","style","fillRule","textRendering","imageRendering","clipRule","shapeRendering","xmlSpace","Card","card","imageUrl","name","set","cost","attributes","rarity","power","health","src","alt","map","attr","CardPage","getCards","response","cards","data","status","onLoaded","keyIndex","message","_pageSize","promise","Pending","Rejected","Fulfilled","Component","onSearchChange","onSubmit","createRef","placeholder","aria-label","onChange","current","value","onKeyDown","event","e","focus","preventDefault","tagsSettings","duplicates","enforceWhitelist","editTags","whitelist","autoComplete","enabled","backspace","dropdown","position","highlightFirst","searchKeys","skipInvalid","QueryBuilder","state","tags","query","onSearch","val","setState","onTagChange","detail","tagify","render","settings","callbacks","add","remove","tabIndex","_setState","_setup","a","localForage","defineDriver","memoryDriver","createInstance","driver","INDEXEDDB","WEBSQL","LOCALSTORAGE","_driver","cache","setupCache","maxAge","store","axiosInstance","Axios","create","baseURL","responseType","adapter","page","pageSize","setup","get","params","LoadOnScroll","onScroll","rect","getBoundingClientRect","window","innerHeight","top","onLoad","addEventListener","removeEventListener","PureComponent","CardMultiDisplay","filters","forEach","tag","concat","_value","filterKeys","queryParams","push","encodeURIComponent","v","replace","join","newQuery","pageNumber","pages","hasMore","loadNextPage","loading","addPage","counter","elderScrollsLegendsAPI","pageIndex","retryPage","prevProps","prevState","snapshot","splice","App","href","Boolean","location","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console"],"mappings":"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","file":"static/js/main.113145d1.chunk.js","sourcesContent":["import React from 'react';\n\nimport './LoadingSpinner.scss';\n\nexport default React.memo(function (props) {\n  return (\n    <div className={'loading-spinner-container'}>\n      <p>Loading... please stand by.</p>\n      <div className={'loading-spinner'}>\n        <div className={'outer-ring'}/>\n        <div className={'inner-ring'}/>\n        <div className={'slider'}/>\n        <div className={'slider'}/>\n        <div className={'slider'}/>\n        <div className={'slider'}/>\n        <div className={'slider'}/>\n      </div>\n    </div>\n  );\n});","import React from 'react';\n\nimport './ErrorRetry.scss';\n\nexport default React.memo(function (props) {\n  const {\n    onRetryClick\n  } = props;\n\n  return (\n    <div className={'error-retry-container'}>\n      <div className={'error-hazards left'}/>\n      <div className={'error-hazards right'}/>\n      <div className={'error-border'}>\n        <button className={'button'} onClick={onRetryClick}>\n          Load failed, Retry?</button>\n      </div>\n    </div>\n  )\n});","import React from 'react';\n\nimport './ErrorPrinter.scss';\n\nexport default React.memo(function (props) {\n  const {\n    children,\n  } = props;\n\n  return (\n    <div className={'error-printer-container'}>\n      <div className={'error-hazards left'}/>\n      <div className={'error-hazards right'}/>\n      <div className={'error-border'}>\n        <p>{children}</p>\n      </div>\n    </div>\n  )\n});","import React from 'react';\nimport cn from 'classnames';\n\nimport './CardLabel.scss';\n\n/**\n *\n * @param {{\n *   text: string,\n *   superscript: string=,\n * }} props\n * @return {*}\n */\nexport default props => {\n  const {\n    superscript,\n    text,\n  } = props;\n\n  return (\n    <div className={cn('card-label', superscript ? 'with-supertext' : null)}>\n      {superscript && <span className={'supertext'}>{superscript}</span>}\n      <span className={'main'}>{text}</span>\n    </div>\n  )\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m495.891 418.109-70.162-70.162-77.782 77.781 70.163 70.163c21.479 21.479 56.303 21.479 77.782 0 21.478-21.479 21.478-56.303-.001-77.782z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m220.622 433.657c3.838 0 7.678-1.465 10.606-4.394 5.858-5.858 5.858-15.355 0-21.213l-17.624-17.624 292.891-239.464c3.484-2.849 5.505-7.112 5.505-11.613v-124.349c0-8.284-6.716-15-15-15h-124.351c-4.501 0-8.764 2.021-11.613 5.505l-239.463 292.89-17.624-17.624c-5.857-5.857-15.355-5.858-21.213 0s-5.858 15.355 0 21.213l127.279 127.279c2.929 2.93 6.767 4.394 10.607 4.394zm197.99-361.482c5.857-5.858 15.355-5.858 21.213 0s5.858 15.355 0 21.213l-261.63 261.63-21.213-21.213z\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m93.891 495.891 70.162-70.162-77.781-77.782-70.163 70.163c-21.479 21.479-21.479 56.303 0 77.782 21.479 21.478 56.303 21.478 77.782-.001z\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m5.505 150.963 118.587 96.955 46.157-56.456-98.074-98.074c-5.858-5.857-5.858-15.355 0-21.213s15.355-5.858 21.213 0l95.946 95.946 47.291-57.842-85.662-104.774c-2.849-3.484-7.112-5.505-11.613-5.505h-124.35c-8.284 0-15 6.716-15 15v124.351c0 4.501 2.021 8.763 5.505 11.612z\"\n});\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m408.051 280.772-17.624 17.624-6.756-8.263-39.792 32.533 11.139 11.139-21.213 21.213-13.268-13.268-40.839 33.389 18.698 15.287-17.624 17.624c-5.857 5.857-5.858 15.355 0 21.213s15.355 5.858 21.213 0l127.279-127.279c2.929-2.929 4.394-6.767 4.394-10.606 0-3.838-1.465-7.678-4.394-10.606-5.858-5.858-15.355-5.858-21.213 0z\"\n});\n\nvar SvgFight = function SvgFight(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    enableBackground: \"new 0 0 512 512\",\n    height: 512,\n    viewBox: \"0 0 512 512\",\n    width: 512,\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgFight, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/fight.9530ca76.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"defs\", {\n  id: \"defs4\"\n}, React.createElement(\"style\", {\n  id: \"style6\",\n  type: \"text/css\"\n}, \"\\n    .fil0 {fill:black}\\n  \"));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Layer_x0020_1\"\n}, React.createElement(\"path\", {\n  id: \"path10\",\n  d: \"m4.25 1.3382l-3.7545 1.128c0.09209 2.7926 0.7929 6.1993 3.7545 7.1956 2.9942-0.9678 3.6274-4.4327 3.7545-7.1956l-3.7545-1.128z\"\n}));\n\nvar SvgBasicShield = function SvgBasicShield(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"svg2\",\n    style: {\n      fillRule: \"evenodd\",\n      textRendering: \"geometricPrecision\",\n      imageRendering: \"optimizeQuality\",\n      clipRule: \"evenodd\",\n      shapeRendering: \"geometricPrecision\"\n    },\n    xmlSpace: \"preserve\",\n    viewBox: \"0 0 8.5 11\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgBasicShield, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/basic-shield.5a64882a.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\n\nimport CardLabel from './CardLabel/CardLabel';\nimport { ReactComponent as Swords } from './fight.svg';\nimport { ReactComponent as Shield } from './basic-shield.svg';\nimport './Card.scss';\n\n/**\n *\n * @param {CardData} props\n * @return {*}\n * @constructor\n */\nexport default function Card (props) {\n  const {\n    card: {\n      imageUrl,\n      name,\n      text,\n      set,\n      type,\n      cost,\n      attributes,\n      rarity,\n      power,\n      health,\n    }\n  } = props;\n\n  return (\n    <div className={'card'}>\n      <div className={'card-image-container'}>\n        <div className={'card-border'}/>\n        <img className={'card-image'} src={imageUrl} alt={name}/>\n      </div>\n      {power != null && health != null ? (\n      <div className={'stats'}>\n        <div className={'stats__stat'}><Swords className={'stats__sword'}/><span className={'stats__stat-text'}>{power}</span></div>\n        <div className={'stats__stat'}><Shield className={'stats__shield'}/><span className={'stats__stat-text'}>{health}</span></div>\n      </div>\n        ): null}\n      <div className={'card-label-container'}>\n        <CardLabel text={name}/>\n        <CardLabel superscript={'Type'} text={type}/>\n        <CardLabel superscript={'Set'} text={set.name}/>\n        <CardLabel superscript={'Rarity'} text={rarity}/>\n      </div>\n      <div className={'card-cost'}>\n        <span>{cost}</span>\n      </div>\n      <div className={'card-description'}>\n        {text && <p className={'description'}>{text}</p>}\n        <span className={'card-attribute'}>Attributes: </span>\n        {attributes.map((attr, i) => <span key={i} className={'card-attribute'}>{attr}</span>)}\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport Async from 'react-async';\n\nimport LoadingSpinner from '../LoadingSpinner/LoadingSpinner';\nimport ErrorRetry from '../ErrorRetry/ErrorRetry';\n\nimport ErrorPrinter from '../ErrorPrinter/ErrorPrinter';\n\nimport Card from '../Card/Card';\n\n/*\n * The concept behind CardPage is to organize blocks of cards in 20s as arrays.\n * I really want this component to return an array rather than a single element with an array of children\n * so it'll tile dynamically with other CardPage's cards. The CardPage can be responsible for resolving and rendering\n * the card API promise and tell CardMultiDisplay when it has updated successfully\n * (this allowing the user to scroll down to automatically load more cards).\n * Without the success callback from loading, further auto-loading in the\n * CardMultiDisplay will be halted.\n *\n * Because CardPage handles promise resolution, it also needs to tell CardMultiDisplay when there are no more cards.\n */\nexport default class CardPage extends React.Component {\n  /**\n   * @param {AxiosResponse.<CardsData>} response\n   */\n  getCards = (response) => {\n    const {\n      data: {\n        cards,\n      },\n      status,\n    } = response;\n\n    const {\n      onLoaded,\n      keyIndex,\n    } = this.props;\n\n    if (status >= 400) {\n      let message = null;\n      switch (status) {\n        case 400:\n          message = 'Bad Request';\n          break;\n        case 403:\n          message = 'Request rate limit exceeded';\n          break;\n        case 404:\n          message = 'The requested resource could not be found.';\n          break;\n        case 500:\n          message = 'Remote API server has internal problem, try again later.';\n          break;\n        case 503:\n          message = 'API is offline for maintenance, try again later.';\n          break;\n        default:\n      }\n      if (message) {\n        return (<ErrorPrinter>{message}</ErrorPrinter>)\n      } else {\n        return (<ErrorRetry onRetryClick={this.onRetryClick}/>);\n      }\n    }\n\n    onLoaded(cards.length === response.data._pageSize);\n    return cards.map((card, i) => <Card card={card} key={keyIndex + i}/>)\n  };\n\n  render() {\n    const {\n      props: {\n        promise,\n        onRetryClick,\n      },\n      getCards,\n    } = this;\n\n    return (\n      <Async promise={promise}>\n        <Async.Pending><LoadingSpinner/></Async.Pending>\n        <Async.Rejected><ErrorRetry onRetryClick={onRetryClick}/></Async.Rejected>\n        <Async.Fulfilled>{data => {\n            return getCards(data);\n          }}</Async.Fulfilled>\n      </Async>\n    )\n  }\n}","import React from 'react';\n\nimport './SearchBar.scss';\n\nexport default (props) => {\n  const {\n    onSearchChange,\n    onSubmit,\n  } = props;\n  let ref = React.createRef();\n\n  // Having focus on input causes enter key to always trigger onSubmit. If \"clear\" is clicked, then we must\n  // immediately refocus the search input. Otherwise typing will fail and enter key will clear.\n\n  return (\n    <div className={'search-container'}>\n      <input className=\"searchbar\"\n             type=\"text\"\n             placeholder=\"Search\"\n             aria-label=\"Search\"\n             ref={ref}\n             onChange={() => onSearchChange(ref.current.value)}\n             onKeyDown={(event) => { if (event.key === \"Enter\") { onSubmit(); }}}\n      />\n      <button className={'clear-btn'}\n              onClick={(e) => {\n                ref.current.focus();\n                e.preventDefault();\n                ref.current.value = '';\n                onSearchChange('');\n              }}>\n        <div className={'cross'}/>\n        <div className={'cross'}/>\n      </button>\n    </div>\n  );\n};\n","import React from 'react';\n\nimport SearchBar from './SearchBar/SearchBar';\nimport Tags from \"@yaireo/tagify/dist/react.tagify\";\n\nimport data from '../../../model/filterTags.json';\n\nimport './QueryBuilder.scss';\n\nconst whitelist = data;\n\nconst tagsSettings = {\n  duplicates: false,\n  enforceWhitelist: true,\n  editTags: false,\n  whitelist,\n  placeholder: 'Add tags to filter results',\n  autoComplete: {\n    enabled: true,\n  },\n  backspace: true,\n  dropdown: {\n    enabled: 1,\n    position: 'all',\n    highlightFirst: true,\n    searchKeys: ['_value'],\n  },\n  skipInvalid: true,\n};\n\n// QueryBuilder is a single source of truth for the search terms.\n// It handles garthering search terms and tags as well as dispatching the command to search through\n// the onSearch() command.\nexport default class QueryBuilder extends React.Component {\n  /**\n   * @param {{\n   *   onSearch: function(Object)\n   * }} props\n   */\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tags: [],\n      query: '',\n    };\n\n    if (this.props.setState) {\n      this._setState = this.setState;\n      this.setState = function () {\n        try {\n          this.props.setState(...arguments)\n        } catch(e) {}\n        this._setState.apply(this, arguments);\n      }\n    }\n  }\n\n  onSubmit = () => {\n    const {\n      tags,\n      query,\n    } = this.state;\n\n    this.props.onSearch({\n      tags,\n      query,\n    });\n  };\n\n  onSearchChange = val => {\n    this.setState({ query: val });\n  };\n\n  onTagChange = e => {\n    this.setState({ tags: e.detail.tagify.value });\n  };\n\n  render = () => {\n    const {\n      onTagChange,\n      onSearchChange,\n      onSubmit,\n    } = this;\n\n    const settings = {\n      ...tagsSettings,\n      callbacks: {\n        add: onTagChange,\n        remove: onTagChange,\n      }\n    };\n\n    return (\n      <div className={'query-container'}>\n        <SearchBar onSearchChange={onSearchChange} onSubmit={onSubmit}/>\n        <Tags settings={settings}/>\n        <button className={'query-search-button'} tabIndex={0} onClick={onSubmit}>Search</button>\n      </div>\n    );\n  }\n}\n","import Axios from 'axios';\nimport localForage from 'localforage';\nimport memoryDriver from 'localforage-memoryStorageDriver';\nimport { setupCache } from 'axios-cache-adapter';\n\nconst ELDER_SCROLLS_LEGENDS_API_URL = 'https://api.elderscrollslegends.io/v1';\n\n/**\n * @typedef {{\n *   data: T,\n *   status: number,\n *   statusText: string,\n *   headers: *,\n *   config: *,\n * }} AxiosResponse\n */\n\n/**\n * @typedef {{\n *   name: string,\n *   rarity: string,\n *   type: string,\n *   subtypes: Array.<string>,\n *   cost: number,\n *   power: number,\n *   health: number,\n *   set: {\n *     id: string,\n *     name: string,\n *     _self: string\n *   },\n *   soulSummon: number,\n *   soulTrap: number,\n *   text: string,\n *   attributes: Array.<string>,\n *   keywords: Array.<string>,\n *   unique: boolean,\n *   imageUrl: string,\n *   id: string\n * }} CardData\n */\n\n/**\n * @typedef {{\n *   cards: Array.<CardData>,\n *   _pageSize: number,\n *   _totalCount: number,\n *   _links: string,\n * }} CardsData\n */\n\nclass ElderScrollsLegendsAPI {\n  constructor() {\n    this.axiosInstance = null;\n    this.promise = null;\n  }\n\n  /**\n   * Jig to call _setup only once. Returns a singleton.\n   * @return {Promise}\n   */\n  setup() {\n    if (!this.promise) {\n      this.promise = this._setup();\n    }\n\n    return this.promise;\n  }\n\n  _setup = async () => {\n    await localForage.defineDriver(memoryDriver);\n\n    this.localForage = localForage.createInstance({\n      name: 'ESLApiCache',\n      driver: [\n        localForage.INDEXEDDB,\n        localForage.WEBSQL,\n        localForage.LOCALSTORAGE,\n        memoryDriver._driver,\n      ],\n    });\n\n    // To be polite, I am using localforage and a cache adapter for Axios to reduce stress on the API\n    // If this were a full-blown server app I would use Redis for caching to save their API.\n    // At least if an individual is running this demo a lot\n    // it will cache in their browser, if possible, across page reloads.\n    this.cache = setupCache({\n      maxAge: 3 * 60 * 60 * 1000,\n      store: this.localForage,\n    });\n\n    this.axiosInstance = Axios.create({\n      baseURL: ELDER_SCROLLS_LEGENDS_API_URL,\n      responseType: 'json',\n      adapter: this.cache.adapter,\n    });\n\n    return true;\n  };\n\n  /**\n   *\n   * @param {number} page\n   * @param {number=} pageSize\n   * @param {string=} query\n   * @return {Promise<AxiosResponse<CardsData>>}\n   */\n  getCards = async (page, pageSize = 20, query = '') => {\n    // Jig to delay request until API caching is set up\n    if (!this.axiosInstance) {\n      await this.setup();\n    }\n\n    return await this.axiosInstance.get('/cards?' + query, {\n      params: {\n        page,\n        pageSize,\n      },\n    });\n  };\n}\n\nexport default new ElderScrollsLegendsAPI();\n","import React from 'react';\n\nimport './LoadOnScroll.scss';\n\nexport default class LoadOnScroll extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.ref = React.createRef();\n  }\n\n  componentDidMount() {\n    window.addEventListener('scroll', this.onScroll);\n    this.onScroll();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('scroll', this.onScroll);\n  }\n\n  onScroll = () => {\n    const rect = this.ref.current.getBoundingClientRect();\n    const height = window.innerHeight;\n\n    if (rect.top < (height - (rect.height / 2))) {\n      this.props.onLoad();\n    }\n  };\n\n  render() {\n    const {\n      ref,\n    } = this;\n    return (\n      <div className={'load-on-scroll'} ref={ref}><p>Scroll to load more</p></div>\n    );\n  }\n}","import React from 'react';\n\nimport CardPage from '../CardPage/CardPage';\nimport QueryBuilder from './QueryBuilder/QueryBuilder';\nimport elderScrollsLegendsAPI from '../../api/ElderScrollsLegendsAPI';\nimport LoadOnScroll from './LoadOnScroll/LoadOnScroll';\n\nimport './CardMultiDisplay.scss';\n\nexport default class CardMultiDisplay extends React.Component {\n  constructor (props) {\n    super(props);\n\n    // Counter is used to increment keys for card pages since pageNumber resets on new searches.\n    // Counter is also used to increment cards inside of CardPages since they would all have been numbers 1-x causing\n    // duplicate keys in sets of 20s so 1-20, 1-20, 1-20.\n    // A new query resets pageNumber, but counter always increases.\n    // loading locks us to one query at a time, but hasMore prevents further queries once we have all results.\n    // hasMore is reset on new queries.\n    // pages[] is appended to instead of replaced each time, so that we don't have to regenerate cards inefficiently\n    // each time a new page is added. The Array is copied so as not to mutate the state.\n    this.state = {\n      query: '',\n      pageNumber: 1,\n      counter: 1,\n      pages: [],\n      loading: false,\n      hasMore: true,\n    };\n\n    if (this.props.setState) {\n      this._setState = this.setState;\n      this.setState = function () {\n        try {\n          this.props.setState(...arguments)\n        } catch(e) {};\n        this._setState.apply(this, arguments);\n      }\n    }\n  }\n\n  // Loads initial page of results with blank search\n  componentDidMount() {\n    this.addPage();\n  }\n\n  /**\n   * Concatenate tags and search fields into complex query string\n   * Each tag has a 'type', which determines what it gets concatenated with.\n   * These are sorted into separate arrays for boolean OR operations\n   * like &attribute=Endurance|Strength\n   *\n   * So the tags passed to tagify have a display name, but also an associated type.\n   * For special cases like misspelled tags in the database, their internal value such as\n   * \"Breakthrough\" and \"Breajthrough\" are represented already in a compound query like so:\n   * \"Breakthrough|Breajthrough\" under the heading of \"Breakthrough\"\n   * See src/model/filterTags.json which were pulled from each category of search type: Attributes, Type,\n   * Subtype, Set, Rarity (and any other I may have failed to mention)\n   *\n   * @param {{\n   *   tags: Array.<{}>,\n   *   query: string,\n   * }} params\n   */\n  onSearch = (params) => {\n    const {\n      tags, query,\n    } = params;\n\n    let filters = {};\n\n    // Using concat to avoid mutating JSON data\n    tags.forEach(tag => {\n      if (filters[tag.type]) {\n        filters[tag.type] = filters[tag.type].concat(tag._value);\n      } else {\n        filters[tag.type] = [].concat(tag._value);\n      }\n    });\n\n    // Joining of similar search categories for the tags into compound query strings\n    const filterKeys = Object.keys(filters);\n    let queryParams = [];\n    for (let i = 0; i < filterKeys.length; ++i) {\n      let key = filterKeys[i];\n      queryParams.push(`${encodeURIComponent(key)}=${filters[key].map(v => v.replace(' ', '%20')).join('|')}`);\n    }\n\n    // Search string for the name field\n    if (query) {\n      queryParams.push('name=' + encodeURIComponent(query));\n    }\n\n    const newQuery = queryParams.join('&');\n\n    // Update state with new query if query is different.\n    if (newQuery !== this.state.query) {\n      this.setState({\n        query: newQuery,\n        pageNumber: 1,\n        pages: [],\n        hasMore: true,\n      });\n    }\n  };\n\n  // Only do this if the query changed, effectively handles the \"search\" button\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (this.state.query !== prevState.query) {\n      this.addPage();\n    }\n  }\n\n  // Lock loading of pages to the loading mutex and only if more are available\n  loadNextPage = () => {\n    if (!this.state.loading && this.state.hasMore) {\n      this.addPage();\n    }\n  };\n\n  // Have no opportunity to test atm, since the queries never seem to fail.\n  // Tries reloading a card page in place by creating a new one and splicing it into the place of the old one.\n  retryPage(counter, pageIndex, pageNumber, pageSize, query) {\n    let pages = [].concat(this.state.pages);\n\n    pages.splice(pageIndex, 1, (<CardPage\n      key={counter} promise={elderScrollsLegendsAPI.getCards(pageNumber, pageSize, query)}\n      onRetryClick={() => this.retryPage(counter, pageIndex, pageNumber, pageSize, query)}\n      onLoaded={() => this.setState({ loading: false })}\n    />));\n  }\n\n  // Adds a new page, which is tantamount to loading pageSize worth of cards,\n  // because promises are created with the pages\n  addPage = () => {\n    let {\n      state: {\n        query,\n        pageNumber,\n        counter,\n      },\n      props: {\n        pageSize\n      }\n    } = this;\n    pageSize = pageSize || 20;\n\n    const promise = elderScrollsLegendsAPI.getCards(pageNumber, pageSize, query);\n    const pageIndex = this.state.pages.length;\n    let pages = [].concat(this.state.pages, (\n      <CardPage\n        key={counter} promise={promise} keyIndex={counter * pageSize}\n        onRetryClick={() => this.retryPage(counter, pageIndex, pageNumber, pageSize, query)}\n        onLoaded={(hasMore) => {\n          this.setState({ loading: false, hasMore });\n        }}\n      />));\n\n    this.setState({\n      pages,\n      pageNumber: pageNumber + 1,\n      counter: counter + 1,\n      loading: true,\n    });\n  };\n\n  render() {\n    const {\n      onSearch,\n      loadNextPage,\n      state: {\n        pages,\n        loading,\n        hasMore,\n      },\n    } = this;\n\n    return (\n      <div>\n        <QueryBuilder onSearch={onSearch}/>\n        {pages.length ? (\n        <div className={'page-container'}>\n          {pages}\n          {!loading && hasMore ? <LoadOnScroll key={0} onLoad={loadNextPage}/> : null}\n        </div>) : null}\n      </div>\n    );\n  }\n}","import React from 'react';\n\nimport './App.scss';\nimport CardMultiDisplay from './components/CardMultiDisplay/CardMultiDisplay';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <p className={'attribution'}>Sword icon made by <a href=\"https://www.flaticon.com/authors/freepik\" title=\"Freepik\">\n        Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></p>\n      <CardMultiDisplay pageSize={20}/>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}